# 🚀 키움증권 + Streamlit 하이브리드 사용법

## 📋 사전 준비

### 1. 키움증권 계좌 필요
- 실전투자 계좌 또는
- 모의투자 계좌

### 2. 키움 OpenAPI+ 설치
1. https://www.kiwoom.com 접속
2. 우측 상단 "다운로드" → "OpenAPI+"
3. "영웅문 Global Plus" 설치
4. "Kiwoom OpenAPI+" 모듈 설치

---

## 🎯 실행 방법

### Step 1: 키움 서버 시작 (필수!)
```bash
# 방법 1: 배치 파일 실행 (더블클릭)
RUN_KIWOOM_SERVER.bat

# 방법 2: 직접 실행
python kiwoom_server.py
```

**로그인 창이 뜹니다:**
- 키움증권 계좌로 로그인
- 공동인증서 또는 간편 인증

**콘솔 메시지 확인:**
```
✅ 키움증권 로그인 성공
🚀 WebSocket 서버 시작: ws://localhost:9999
✅ 키움 서버 실행 중...
```

### Step 2: Streamlit 대시보드 실행
```bash
# 새 터미널/cmd 창에서
streamlit run app.py
```

브라우저가 자동으로 열립니다: http://localhost:8501

### Step 3: 실시간 차트 확인
1. **포트폴리오에 종목 추가** (사이드바)
2. **"실시간 차트" 탭** 이동
3. **"🚀 진짜 실시간 모드" 체크박스 ON**
4. 차트가 깜빡임 없이 실시간으로 업데이트됨!

---

## 🔧 트러블슈팅

### 문제: "키움 OpenAPI를 찾을 수 없습니다"
**해결**: 키움 OpenAPI+ 설치 필요
- https://www.kiwoom.com → 다운로드

### 문제: "WebSocket 연결 실패"
**해결**:
1. 키움 서버가 실행 중인지 확인
2. `python kiwoom_server.py` 먼저 실행

### 문제: "로그인 실패"
**해결**:
- 키움증권 계좌 확인
- 모의투자 계좌 개설: https://www.kiwoom.com

---

## 📊 아키텍처

```
┌──────────────────────┐
│  kiwoom_server.py    │  ← 키움 OpenAPI 연결
│  (PyQt5 + OpenAPI)   │  ← Windows에서 실행
│         ↓            │
│  WebSocket Server    │
│  ws://localhost:9999 │
└──────────┬───────────┘
           │
           ↓ 실시간 데이터
┌──────────────────────┐
│   Streamlit          │  ← 웹 브라우저
│   app.py             │
│         ↓            │
│   Custom Component   │  ← 차트 렌더링
└──────────────────────┘
```

---

## 💡 Tips

1. **키움 서버는 항상 먼저 실행**해야 합니다
2. **두 개의 터미널/cmd** 필요:
   - 터미널 1: `python kiwoom_server.py`
   - 터미널 2: `streamlit run app.py`
3. **종료 순서**:
   - Streamlit 종료 (Ctrl+C)
   - 키움 서버 종료 (Ctrl+C)

---

## 🎉 완료!

이제 증권사 HTS처럼 실시간 차트가 작동합니다!
